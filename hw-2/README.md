# Вокруг PHP – экосистема веб-приложений. Обучение в записи
## Backend API
### Домашнее задание

<br><br>
1. Сделайте новую ветку из той, которую мы
   создали на прошлом уроке. Это нужно для
   того, чтобы мы могли работать с кодом из
   прошлого урока.<br><br>
2. Загрузите весь код из сегодняшнего урока в
   Git в новую ветку, создайте новый pull request.
   Пришлите на проверку ссылку на pull request.<br><br>
3. Сегодня мы работали с вами с токеном
   Telegram. Какой тип аутентификации мы
   использовали?<br><br>

![](../archives/php-2-1.jpg)

<br>
4. ⚹ На занятии мы создали класс
   TgMessagesCommand. Сделайте так, чтобы он
   мог общаться с пользователем и запрашивать
   данные для сохранения расписания. <br><br>
   ⚹ – дополнительное задание <br><br>

#### Для решения доп. задания № 4 нужно:<br><br>
1. Создать из TgMessagesCommand демона<br><br>
2. Хранить всю историю сообщений, пришедших за
   время работы скрипта.<br><br>
3. Хранить offset получения сообщений в
   TgMessagesCommand <br><br>
4. Если пришло новое сообщение, то оно сохраняется в
   историю сообщений, после чего определяется какое
   сообщение мы должны отправить пользователю. Например,
   если пользователь отправил “/start” мы должны отправить
   “Укажите название события”, если пользователь отправил
   следующее сообщение после “/start” мы должны отправить
   “Укажите ID пользователя” и так далее. Если мы получили 4
   сообщения от пользователя (название события, ID
   пользователя, Текст напоминания и cron расписание), то мы
   сохраняем их в базу, а пользователю отправляем “Я
   записал Ваше событие. Для нового события введите /start”.
   Отправка сообщений пользователю происходит так же, как
   мы это делали в 1‑м задании, когда отправляли сообщения
   пользователю по расписанию.<br><br>

![](../archives/php-2-2.jpg)
<br><br>
* Если вы хотите отправить сообщение не себе,
  то получатель должен начать диалог с вашим
  ботом. Узнать идентификатор нужного вам
  пользователя вы можете, переслав боту
  @myidbot любое сообщение этого
  пользователя

<br><br><hr>
**В качестве решения приложить:** <br>
➔ ссылку на pull request в вашем репозитории с домашним заданием <br>
⚹ – дополнительное задание